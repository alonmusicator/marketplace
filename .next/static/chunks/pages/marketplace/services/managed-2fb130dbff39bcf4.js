(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{86145:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/marketplace/services/managed",function(){return n(98515)}])},62041:function(e,t,n){"use strict";n.d(t,{j:function(){return u},B:function(){return f}});var r=n(34051),s=n.n(r),a=n(8100);function i(e,t,n,r,s,a,i){try{var c=e[a](i),l=c.value}catch(o){return void n(o)}c.done?t(l):Promise.resolve(l).then(r,s)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function o(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var u=15,d=function(){var e,t=(e=s().mark((function e(t){var n,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",null!==(a=r.market_data.current_price.usd)&&void 0!==a?a:null);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function c(e){i(a,r,s,c,l,"next",e)}function l(e){i(a,r,s,c,l,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),f=function(){var e,t=(0,a.ZP)("https://api.coingecko.com/api/v3/coins/ethereum?localization=false&tickers=false&community_data=false&developer_data=false&sparkline=false",d,{refreshInterval:1e4}),n=t.data,r=o(t,["data"]);return{eth:l({data:n,perItem:null!==(e=n&&(u/Number(n)).toFixed(6))&&void 0!==e?e:null},r)}}},28522:function(e,t,n){"use strict";n.d(t,{Y:function(){return f}});var r=n(85893),s=n(62445),a=n(97672),i=n(62041),c=n(25675);function l(){var e=(0,i.B)().eth;return(0,r.jsxs)("div",{className:"flex flex-col xs:flex-row text-center",children:[(0,r.jsxs)("div",{className:"p-6 border drop-shadow rounded-md mr-2",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:e.data?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.default,{layout:"fixed",height:"35",width:"35",src:"/small-eth.webp"}),(0,r.jsxs)("span",{className:"text-xl font-bold",children:["= ",e.data,"$"]})]}):(0,r.jsx)("div",{className:"w-full flex justify-center",children:(0,r.jsx)(a.aN,{size:"md"})})}),(0,r.jsx)("p",{className:"text-lg text-gray-500",children:"Current eth Price"})]}),(0,r.jsxs)("div",{className:"p-6 border drop-shadow rounded-md",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:e.data?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-xl font-bold",children:e.perItem}),(0,r.jsx)(c.default,{layout:"fixed",height:"35",width:"35",src:"/small-eth.webp"}),(0,r.jsxs)("span",{className:"text-xl font-bold",children:["= ",i.j,"$"]})]}):(0,r.jsx)("div",{className:"w-full flex justify-center",children:(0,r.jsx)(a.aN,{size:"md"})})}),(0,r.jsx)("p",{className:"text-lg text-gray-500",children:"Price per course"})]})]})}var o=n(44853);function u(){var e=(0,o.$)().requireInstall,t=(0,s.vL)(),n=t.account,i=t.network;return(0,r.jsx)("section",{className:"text-white bg-indigo-600 rounded-lg",children:(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("h1",{className:"text-base xs:text-xl break-words",children:["Hello, ",n.data]}),(0,r.jsx)("h2",{className:"subtitle mb-5 text-sm xs:text-base",children:"I hope you are having a great day!"}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"sm:flex sm:justify-center lg:justify-start",children:(0,r.jsx)(a.zx,{className:"mr-2 text-sm xs:text-lg p-2",variant:"white",children:"Learn how to purchase"})}),(0,r.jsxs)("div",{children:[i.hasInitialResponse&&!i.isSupported&&(0,r.jsxs)("div",{className:"bg-red-400 p-4 rounded-lg",children:[(0,r.jsx)("div",{children:"Connected to wrong network"}),(0,r.jsxs)("div",{children:["Connect to: "," ",(0,r.jsx)("strong",{className:"text-2xl",children:i.target})]})]}),e&&(0,r.jsx)("div",{className:"bg-yellow-500 p-4 rounded-lg",children:"Cannot connect to network. Please install Metamask."}),i.data&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:"Currently on "}),(0,r.jsx)("strong",{className:"text-2xl",children:i.data})]})]})]})]})})}var d=[{href:"/marketplace",value:"Buy"},{href:"/marketplace/services/owned",value:"My Services"},{href:"/marketplace/services/managed",value:"Manage Services",requireAdmin:!0}];function f(){var e=(0,s.mA)().account;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsx)(u,{})}),(0,r.jsx)(l,{}),(0,r.jsx)("div",{className:"flex flex-row-reverse p-4 sm:px-6 lg:px-8",children:(0,r.jsx)(a.Oo,{isAdmin:e.isAdmin,items:d})})]})}},98515:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(34051),s=n.n(r),a=n(85893),i=n(64180),c=n(28522),l=n(56696),o=n(97672),u=n(62445),d=n(67294),f=n(44853),h=n(80413),x=n(82881);function v(e,t,n,r,s,a,i){try{var c=e[a](i),l=c.value}catch(o){return void n(o)}c.done?t(l):Promise.resolve(l).then(r,s)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){v(a,r,s,i,c,"next",e)}function c(e){v(a,r,s,i,c,"throw",e)}i(void 0)}))}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}var g=function(e){var t=e.onVerify,n=(0,d.useState)(""),r=n[0],s=n[1];return(0,a.jsxs)("div",{className:"flex mr-2 relative rounded-md",children:[(0,a.jsx)("input",{value:r,onChange:function(e){var t=e.target.value;return s(t)},type:"text",name:"account",id:"account",className:"w-96 focus:ring-indigo-500 shadow-md focus:border-indigo-500 block pl-7 p-4 sm:text-sm border-gray-300 rounded-md",placeholder:"0x2341ab..."}),(0,a.jsx)(o.zx,{onClick:function(){t(r)},children:"Verify"})]})};function b(){var e,t,n=(0,d.useState)({}),r=n[0],i=n[1],v=(0,d.useState)(null),b=v[0],y=v[1],w=(0,d.useState)({state:"all"}),N=w[0],k=w[1],O=(0,f.$)(),S=O.web3,P=O.contract,_=(0,u.Aj)({redirectTo:"/marketplace"}).account,C=(0,u.BG)(_).managedServices,A=function(){var e=p(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.methods[n](t).send({from:_.data});case 3:return r=e.sent,e.abrupt("return",r);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=p(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,x.f)(A(t,"activateService"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=p(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,x.f)(A(t,"deactivateService"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){console.log(b)}),[b]);var F=function(){var e=p(s().mark((function e(t){var n,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=/[0-9A-Fa-f]{6}/g,!t||66!==t.length||!n.test(t)){e.next=9;break}return e.next=4,P.methods.getServiceByHash(t).call();case 4:if("0x0000000000000000000000000000000000000000"===(r=e.sent).owner){e.next=9;break}return a=(0,h.L)(S)({hash:t},r),y(a),e.abrupt("return");case 9:y(null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e,t){return(0,a.jsxs)(l.F6,{isSearched:t,service:e,children:[(0,a.jsx)(g,{onVerify:function(t){!function(e,t){var n=t.hash,s=t.proof;if(e){var a=S.utils.sha3(e),c=S.utils.soliditySha3({type:"bytes32",value:a},{type:"bytes32",value:n});i(j({},r,m({},n,c===s)))}}(t,{hash:e.hash,proof:e.proof})}}),r[e.hash]&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(o.v0,{children:"Verified!"})}),0==r[e.hash]&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(o.v0,{type:"danger",children:"Wrong Poof!"})}),"purchased"===e.state&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(o.zx,{onClick:function(){return E(e.hash)},variant:"green",children:"Activate"}),(0,a.jsx)(o.zx,{onClick:function(){return I(e.hash)},variant:"red",children:"Deactivate"})]})]},e.ownedServiceId)};if(!_.isAdmin)return null;var B=null===(t=null===(e=C.data)||void 0===e?void 0:e.filter((function(e){return"all"===N.state||e.state===N.state})))||void 0===t?void 0:t.map((function(e){return z(e)}));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Y,{}),(0,a.jsx)(l.qv,{onFilterSelect:function(e){return k({state:e})},onSearchSubmit:F}),(0,a.jsxs)("section",{className:"grid grid-cols-1",children:[b&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold p-5",children:"Search"}),z(b,!0)]}),(0,a.jsx)("h1",{className:"text-2xl font-bold p-5",children:"All Services"}),B,0===(null===B||void 0===B?void 0:B.length)&&(0,a.jsx)(o.v0,{type:"warning",children:"No services to display"})]})]})}b.Layout=i.I},82881:function(e,t,n){"use strict";n.d(t,{f:function(){return a}});var r=n(85893),s=n(40782),a=function(e){s.Am.promise(e,{pending:{render:function(){return(0,r.jsxs)("div",{className:"p-6 py-2",children:[(0,r.jsx)("p",{className:"mb-2",children:"Your transaction is being processed."}),(0,r.jsx)("p",{children:"Hang tight... Just for a few seconds."})]})},icon:!1},success:{render:function(e){var t=e.data;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-bold",children:["Tx: ",t.transactionHash.slice(0,20),"..."]}),(0,r.jsx)("p",{children:"Has been successfully processed."}),(0,r.jsx)("a",{href:"https://ropsten.etherscan.io/tx/".concat(t.transactionHash),target:"_blank",children:(0,r.jsx)("i",{className:"text-indigo-600 underline",children:"See Tx Details"})})]})},icon:"\ud83d\udfe2"},error:{render:function(e){var t,n=e.data;return(0,r.jsx)("div",{children:null!==(t=n.message)&&void 0!==t?t:"Transaction has failed"})}}},{closeButton:!0})}}},function(e){e.O(0,[482,714,217,877,774,888,179],(function(){return t=86145,e(e.s=t);var t}));var t=e.O();_N_E=t}]);