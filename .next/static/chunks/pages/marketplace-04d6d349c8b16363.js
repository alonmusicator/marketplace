(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[465],{54563:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/marketplace",function(){return r(21707)}])},62041:function(e,t,r){"use strict";r.d(t,{j:function(){return d},B:function(){return m}});var n=r(34051),s=r.n(n),a=r(8100);function i(e,t,r,n,s,a,i){try{var c=e[a](i),l=c.value}catch(o){return void r(o)}c.done?t(l):Promise.resolve(l).then(n,s)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){c(e,t,r[t])}))}return e}function o(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var d=15,u=function(){var e,t=(e=s().mark((function e(t){var r,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",null!==(a=n.market_data.current_price.usd)&&void 0!==a?a:null);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function c(e){i(a,n,s,c,l,"next",e)}function l(e){i(a,n,s,c,l,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),m=function(){var e,t=(0,a.ZP)("https://api.coingecko.com/api/v3/coins/ethereum?localization=false&tickers=false&community_data=false&developer_data=false&sparkline=false",u,{refreshInterval:1e4}),r=t.data,n=o(t,["data"]);return{eth:l({data:r,perItem:null!==(e=r&&(d/Number(r)).toFixed(6))&&void 0!==e?e:null},n)}}},28522:function(e,t,r){"use strict";r.d(t,{Y:function(){return m}});var n=r(85893),s=r(62445),a=r(97672),i=r(62041),c=r(25675);function l(){var e=(0,i.B)().eth;return(0,n.jsxs)("div",{className:"flex flex-col xs:flex-row text-center",children:[(0,n.jsxs)("div",{className:"p-6 border drop-shadow rounded-md mr-2",children:[(0,n.jsx)("div",{className:"flex items-center justify-center",children:e.data?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.default,{layout:"fixed",height:"35",width:"35",src:"/small-eth.webp"}),(0,n.jsxs)("span",{className:"text-xl font-bold",children:["= ",e.data,"$"]})]}):(0,n.jsx)("div",{className:"w-full flex justify-center",children:(0,n.jsx)(a.aN,{size:"md"})})}),(0,n.jsx)("p",{className:"text-lg text-gray-500",children:"Current eth Price"})]}),(0,n.jsxs)("div",{className:"p-6 border drop-shadow rounded-md",children:[(0,n.jsx)("div",{className:"flex items-center justify-center",children:e.data?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-xl font-bold",children:e.perItem}),(0,n.jsx)(c.default,{layout:"fixed",height:"35",width:"35",src:"/small-eth.webp"}),(0,n.jsxs)("span",{className:"text-xl font-bold",children:["= ",i.j,"$"]})]}):(0,n.jsx)("div",{className:"w-full flex justify-center",children:(0,n.jsx)(a.aN,{size:"md"})})}),(0,n.jsx)("p",{className:"text-lg text-gray-500",children:"Price per course"})]})]})}var o=r(44853);function d(){var e=(0,o.$)().requireInstall,t=(0,s.vL)(),r=t.account,i=t.network;return(0,n.jsx)("section",{className:"text-white bg-indigo-600 rounded-lg",children:(0,n.jsxs)("div",{className:"p-8",children:[(0,n.jsxs)("h1",{className:"text-base xs:text-xl break-words",children:["Hello, ",r.data]}),(0,n.jsx)("h2",{className:"subtitle mb-5 text-sm xs:text-base",children:"I hope you are having a great day!"}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("div",{className:"sm:flex sm:justify-center lg:justify-start",children:(0,n.jsx)(a.zx,{className:"mr-2 text-sm xs:text-lg p-2",variant:"white",children:"Learn how to purchase"})}),(0,n.jsxs)("div",{children:[i.hasInitialResponse&&!i.isSupported&&(0,n.jsxs)("div",{className:"bg-red-400 p-4 rounded-lg",children:[(0,n.jsx)("div",{children:"Connected to wrong network"}),(0,n.jsxs)("div",{children:["Connect to: "," ",(0,n.jsx)("strong",{className:"text-2xl",children:i.target})]})]}),e&&(0,n.jsx)("div",{className:"bg-yellow-500 p-4 rounded-lg",children:"Cannot connect to network. Please install Metamask."}),i.data&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:"Currently on "}),(0,n.jsx)("strong",{className:"text-2xl",children:i.data})]})]})]})]})})}var u=[{href:"/marketplace",value:"Buy"},{href:"/marketplace/services/owned",value:"My Services"},{href:"/marketplace/services/managed",value:"Manage Services",requireAdmin:!0}];function m(){var e=(0,s.mA)().account;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"pt-4",children:(0,n.jsx)(d,{})}),(0,n.jsx)(l,{}),(0,n.jsx)("div",{className:"flex flex-row-reverse p-4 sm:px-6 lg:px-8",children:(0,n.jsx)(a.Oo,{isAdmin:e.isAdmin,items:u})})]})}},21707:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return S},default:function(){return P}});var n=r(34051),s=r.n(n),a=r(85893),i=r(56696),c=r(64180),l=r(62445),o=r(97672),d=r(62041),u=r(67294);function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){m(e,t,r[t])}))}return e}var h={price:"",email:"",confirmationEmail:""},x=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{isDisabled:e,message:t}};function p(e){var t=e.service,r=e.onClose,n=e.onSubmit,s=e.isNewPurchase,i=(0,u.useState)(!1),c=(i[0],i[1]),l=(0,u.useState)(h),m=l[0],p=l[1],v=(0,u.useState)(!1),b=v[0],j=v[1],g=(0,u.useState)(!1),y=g[0],w=g[1],N=(0,d.B)().eth;(0,u.useEffect)((function(){t&&(c(!0),p(f({},h,{price:N.perItem})))}),[t]);var k=function(e,t,r){var n=e.price,s=e.email,a=e.confirmationEmail;if(!n||Number(n)<=0)return x(!0,"Price is not valid.");if(r){if(0===a.length||0===s.length)return x(!0);if(s!==a)return x(!0,"Email and confirmation email do not match.")}return t?x():x(!0,"You need to agree with the terms of service in order to submit the form")}(m,y,s);return(0,a.jsx)(o.u_,{isOpen:!0,children:(0,a.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,a.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,a.jsx)("div",{className:"sm:flex sm:items-start",children:(0,a.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,a.jsx)("h3",{className:"mb-7 text-lg font-bold leading-6 text-gray-900",id:"modal-title",children:t.title}),(0,a.jsxs)("div",{className:"mt-1 relative rounded-md",children:[(0,a.jsxs)("div",{className:"mb-1",children:[(0,a.jsx)("label",{className:"mb-2 font-bold",children:"Price(eth)"}),(0,a.jsxs)("div",{className:"text-xs text-gray-700 flex",children:[(0,a.jsx)("label",{className:"flex items-center mr-2",children:(0,a.jsx)("input",{checked:b,onChange:function(e){var t=e.target.checked;p(f({},m,{price:t?m.price:N.perItem})),j(t)},type:"checkbox",className:"form-checkbox"})}),(0,a.jsx)("span",{children:"Adjust Price - only when the price is not correct"})]})]}),(0,a.jsx)("input",{disabled:!b,value:m.price,onChange:function(e){var t=e.target.value;isNaN(t)||p(f({},m,{price:t}))},type:"text",name:"price",id:"price",className:"disabled:opacity-50 w-80 mb-1 focus:ring-indigo-500 shadow-md focus:border-indigo-500 block pl-7 p-4 sm:text-sm border-gray-300 rounded-md"}),(0,a.jsx)("p",{className:"text-xs text-gray-700",children:"Price will be verified at the time of the order. If the price will be lower, order can be declined (+- 2% slipage is allowed)"})]}),s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mt-2 relative rounded-md",children:[(0,a.jsx)("div",{className:"mb-1",children:(0,a.jsx)("label",{className:"mb-2 font-bold",children:"Email"})}),(0,a.jsx)("input",{onChange:function(e){var t=e.target.value;p(f({},m,{email:t.trim()}))},type:"email",name:"email",id:"email",className:"w-80 focus:ring-indigo-500 shadow-md focus:border-indigo-500 block pl-7 p-4 sm:text-sm border-gray-300 rounded-md",placeholder:"x@y.com"}),(0,a.jsx)("p",{className:"text-xs text-gray-700 mt-1",children:"It's important to fill a correct email, otherwise the order cannot be verified. We are not storing your email anywhere"})]}),(0,a.jsxs)("div",{className:"my-2 relative rounded-md",children:[(0,a.jsx)("div",{className:"mb-1",children:(0,a.jsx)("label",{className:"mb-2 font-bold",children:"Repeat Email"})}),(0,a.jsx)("input",{onChange:function(e){var t=e.target.value;p(f({},m,{confirmationEmail:t.trim()}))},type:"email",name:"confirmationEmail",id:"confirmationEmail",className:"w-80 focus:ring-indigo-500 shadow-md focus:border-indigo-500 block pl-7 p-4 sm:text-sm border-gray-300 rounded-md",placeholder:"x@y.com"})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-700 flex mt-5",children:[(0,a.jsx)("label",{className:"flex items-center mr-2",children:(0,a.jsx)("input",{checked:y,onChange:function(e){var t=e.target.checked;w(t)},type:"checkbox",className:"form-checkbox"})}),(0,a.jsx)("span",{children:"I accept Eincode 'terms of service' and I agree that my order can be rejected in the case data provided above are not correct"})]}),k.message&&(0,a.jsx)("div",{className:"p-4 my-3 text-yellow-800 bg-yellow-300 rounded-lg text-sm",children:k.message})]})})}),(0,a.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex",children:[(0,a.jsx)(o.zx,{disabled:k.isDisabled,onClick:function(){n(m,t)},children:"Submit"}),(0,a.jsx)(o.zx,{onClick:function(){c(!1),p(h),j(!1),w(!1),r()},variant:"red",children:"Cancel"})]})]})})}var v=r(28522),b=r(44853),j=r(82881);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t,r,n,s,a,i){try{var c=e[a](i),l=c.value}catch(o){return void r(o)}c.done?t(l):Promise.resolve(l).then(n,s)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function i(e){y(a,n,s,i,c,"next",e)}function c(e){y(a,n,s,i,c,"throw",e)}i(void 0)}))}}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){N(e,t,r[t])}))}return e}function O(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=!0;function P(e){var t=e.services,r=(0,b.$)(),n=r.web3,c=r.contract,d=r.requireInstall,m=(0,l.vL)(),f=m.hasConnectedWallet,h=m.isConnecting,x=m.account,g=(0,l.cp)(t,x.data).ownedServices,y=(0,u.useState)(null),N=y[0],S=y[1],P=(0,u.useState)(null),I=P[0],C=P[1],E=(0,u.useState)(!0),_=E[0],z=E[1],A=function(){var e=w(s().mark((function e(t,r){var a,i,c,l,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.utils.utf8ToHex(r.id),i=n.utils.soliditySha3({type:"bytes16",value:a},{type:"address",value:x.data}),c=n.utils.toWei(String(t.price)),C(r.id),_?(l=n.utils.sha3(t.email),o=n.utils.soliditySha3({type:"bytes32",value:l},{type:"bytes32",value:i}),(0,j.f)(F({hexServiceId:a,proof:o,value:c},r))):(0,j.f)(H({serviceHash:i,value:c},r));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),F=function(){var e=w(s().mark((function e(t,r){var n,a,i,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.hexServiceId,a=t.proof,i=t.value,e.prev=1,e.next=4,c.methods.purchaseService(n,a).send({from:x.data,value:i});case 4:return l=e.sent,g.mutate(O(g.data).concat([k({},r,{proof:a,state:"purchased",owner:x.data,price:i})])),e.abrupt("return",l);case 9:throw e.prev=9,e.t0=e.catch(1),new Error(e.t0.message);case 12:return e.prev=12,C(null),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t,r){return e.apply(this,arguments)}}(),H=function(){var e=w(s().mark((function e(t,r){var n,a,i,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.serviceHash,a=t.value,e.prev=1,e.next=4,c.methods.repurchaseService(n).send({from:x.data,value:a});case 4:return i=e.sent,(l=g.data.findIndex((function(e){return e.id===r.id})))>=0?(g.data[l].state="purchased",g.mutate(g.data)):g.mutate(),e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(1),new Error(e.t0.message);case 13:return e.prev=13,C(null),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t,r){return e.apply(this,arguments)}}(),T=function(){S(null),z(!0)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Y,{}),(0,a.jsx)(i.$4,{services:t,children:function(e){var t=g.lookup[e.id];return(0,a.jsx)(i.WF,{service:e,state:null===t||void 0===t?void 0:t.state,disabled:!f,Footer:function(){if(d)return(0,a.jsx)(o.zx,{size:"sm",disabled:!0,variant:"lightPurple",children:"Install"});if(h)return(0,a.jsx)(o.zx,{size:"sm",disabled:!0,variant:"lightPurple",children:(0,a.jsx)(o.aN,{size:"sm"})});if(!g.hasInitialResponse)return(0,a.jsx)(o.aN,{size:"sm"});var r=I===e.id;return t?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(o.zx,{onClick:function(){return alert("You are owner of this service")},size:"sm",disabled:!1,variant:"white",children:"Yours \u2714"}),"deactivated"===t.state&&(0,a.jsx)("div",{className:"ml-1",children:(0,a.jsxs)(o.zx,{size:"sm",disabled:r,onClick:function(){z(!1),S(e)},variant:"purple",children:[r?(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(o.aN,{size:"sm"}),(0,a.jsx)("div",{className:"ml-2",children:"In Progress"})]}):(0,a.jsx)("div",{children:"Fund to activate"}),"                              "]})})]})}):(0,a.jsx)(o.zx,{size:"sm",onClick:function(){return S(e)},disabled:!f||r,variant:"lightPurple",children:r?(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(o.aN,{size:"sm"}),(0,a.jsx)("div",{className:"ml-2",children:"In Progress"})]}):(0,a.jsx)("div",{children:"Purchase"})})}},e.id)}}),N&&(0,a.jsx)(p,{service:N,isNewPurchase:_,onSubmit:function(e,t){A(e,t),T()},onClose:T})]})}P.Layout=c.I},82881:function(e,t,r){"use strict";r.d(t,{f:function(){return a}});var n=r(85893),s=r(40782),a=function(e){s.Am.promise(e,{pending:{render:function(){return(0,n.jsxs)("div",{className:"p-6 py-2",children:[(0,n.jsx)("p",{className:"mb-2",children:"Your transaction is being processed."}),(0,n.jsx)("p",{children:"Hang tight... Just for a few seconds."})]})},icon:!1},success:{render:function(e){var t=e.data;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"font-bold",children:["Tx: ",t.transactionHash.slice(0,20),"..."]}),(0,n.jsx)("p",{children:"Has been successfully processed."}),(0,n.jsx)("a",{href:"https://ropsten.etherscan.io/tx/".concat(t.transactionHash),target:"_blank",children:(0,n.jsx)("i",{className:"text-indigo-600 underline",children:"See Tx Details"})})]})},icon:"\ud83d\udfe2"},error:{render:function(e){var t,r=e.data;return(0,n.jsx)("div",{children:null!==(t=r.message)&&void 0!==t?t:"Transaction has failed"})}}},{closeButton:!0})}}},function(e){e.O(0,[482,714,217,877,774,888,179],(function(){return t=54563,e(e.s=t);var t}));var t=e.O();_N_E=t}]);